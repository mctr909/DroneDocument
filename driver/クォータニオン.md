# クォータニオンの定義
>
> ## 記法
>>
>> $`\begin{align}\tilde q=q_w+q_xi+q_yj+q_zk\end{align}`$
>>
>> - 文字の上部に~(チルダ)を付けることでクォータニオンを表す  
>> - $`q_w,\ q_xi,\ q_yj,\ q_zk`$の4つをまとめて$`\tilde q`$の**成分**という  
>> - $`q_w`$を$`\tilde q`$の**実部**という  
>> - $`q_xi,\ q_yj,\ q_zk`$の3つをまとめて$`\tilde q`$の**虚部**という  
>> - $`q_w,\ q_x,\ q_y,\ q_z`$は実数の**係数**とする  
>> - $`i,\ j,\ k`$は[**虚数単位**](#虚数単位の基本法則)という  
>>
> ## 虚数単位の基本法則
>>
>> $`\begin{align}i^2=j^2=k^2=-1\end{align}`$  
>>
>> **虚数単位同士の関係**  
>> $`\begin{align}
&i=jk\\
&j=ki\\
&k=ij
\end{align}`$  
>>
>> **反交換性**  
>> $`\begin{align}
kj=-jk=-i\\
ik=-ki=-j\\
ji=-ij=-k
\end{align}`$  
>> - 虚数単位の積の順序を変えたら符号を反転させる  
>> - 反交換性により積の交換法則が成り立たないため虚数単位の順序を意識する  
>
> ## クォータニオン積
>>
>> $`\tilde q\tilde p`$の[成分](#記法)を書き出して・・・  
>> $`\begin{align}(q_w+q_xi+q_yj+q_zk)(p_w+p_xi+p_yj+p_zk)\end{align}`$  
>> 虚数単位の積の順序を意識して展開すると・・・  
>> $`\begin{align}\begin{matrix}
=q_wp_w &+q_wp_xi &+q_wp_yj &+q_wp_zk \\
+q_xp_wi&+q_xp_xii&+q_xp_yij&+q_xp_zik\\
+q_yp_wj&+q_yp_xji&+q_yp_yjj&+q_yp_zjk\\
+q_zp_wk&+q_zp_xki&+q_zp_ykj&+q_zp_zkk
\end{matrix}\end{align}`$  
>> [虚数単位の基本法則](#虚数単位の基本法則)を適用すると・・・  
>> $`\begin{align}\begin{matrix}
=q_wp_w &+q_wp_xi&+q_wp_yj&+q_wp_zk\\
+q_xp_wi&-q_xp_x &+q_xp_yk&-q_xp_zj\\
+q_yp_wj&-q_yp_xk&-q_yp_y &+q_yp_zi\\
+q_zp_wk&+q_zp_xj&-q_zp_yi&-q_zp_z
\end{matrix}\end{align}`$  
>> 同類項をまとめると・・・  
>> $`\begin{align}\begin{matrix}
=&(q_wp_w&-q_xp_x&-q_yp_y&-q_zp_z) \\
+&(q_xp_w&+q_wp_x&-q_zp_y&+q_yp_z)i\\
+&(q_yp_w&+q_zp_x&+q_wp_y&-q_xp_z)j\\
+&(q_zp_w&-q_yp_x&+q_xp_y&+q_wp_z)k
\end{matrix}\end{align}`$  
>> - これを$`\tilde q`$と$`\tilde p`$のクォータニオン積という  
> ## 共役クォータニオン
>>
>> $`\begin{align}\tilde q^*=q_w-q_xi-q_yj-q_zk\end{align}`$  
>> - 文字の右上に*(スター)を付けることで共役クォータニオンを表す  
>> - $`\tilde q`$の[虚部](#記法)の符号を反転したものを$`\tilde q`$の共役クォータニオンという  
>>
> ## ノルム
>>
>> $`\begin{align}\|\tilde q\|=\sqrt{q_w^2+q_x^2+q_y^2+q_z^2}\end{align}`$  
>> - 文字を$`\|`$(<ruby>双柱<rt>そうちゅう</rt></ruby>)で囲むことでノルムを表す  
>> - $`\tilde q`$の大きさを$`\tilde q`$のノルムという  
>> - [共役クォータニオン](#共役クォータニオン)との[クォータニオン積](#クォータニオン積)はノルムの2乗となる  
>> $`\begin{align}\begin{matrix}
\tilde q\tilde q^*&=(q_w+q_xi+q_yj+q_zk)(q_w-q_xi-q_yj-q_zk)\\
&\begin{matrix}
=&(q_wq_w&+q_xq_x&+q_yq_y&+q_zq_z) \\
+&(q_xq_w&-q_wq_x&+q_zq_y&-q_yq_z)i\\
+&(q_yq_w&-q_zq_x&-q_wq_y&+q_xq_z)j\\
+&(q_zq_w&+q_yq_x&-q_xq_y&-q_wq_z)k
\end{matrix}\\
&=q_w^2+q_x^2+q_y^2+q_z^2\\
&\therefore \tilde q\tilde q^*=\tilde q^*\tilde q=\|\tilde q\|^2
\end{matrix}\end{align}`$  
>>
> ## 単位クォータニオン
>>
>> - [ノルム](#ノルム)が1のクォータニオンを単位クォータニオンという  
>>
> ## 正規化
>>
>> $`\begin{align}\frac{\tilde q}{\|\tilde q\|}\end{align}`$  
>> - [ノルム](#ノルム)で割ることで[単位クォータニオン](#単位クォータニオン)を作れる、この操作のことを正規化という  
>>
> ## 逆クォータニオン
>>
>> $`\begin{align}\tilde q^{-1}=\frac{1}{\tilde q}=\frac{\tilde q^*}{\tilde q\tilde q^*}=\frac{\tilde q^*}{\|\tilde q\|^2}\end{align}`$  
>> - $`\tilde q`$の逆数を$`\tilde q`$の逆クォータニオンという  
>> - 分母分子に[共役クォータニオン](#共役クォータニオン)を掛けることで分母が[ノルムの2乗](#ノルム)となり有理化できる  
>> - $`\tilde q`$が[単位クォータニオン](#単位クォータニオン)の場合$`\tilde q`$の[共役クォータニオン](#共役クォータニオン)と同じとなる  
>>
